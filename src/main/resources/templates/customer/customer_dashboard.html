<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Customer Dashboard</title>
</head>
<body>

<h1>Customer Dashboard</h1>

<p>
    Logged in as:
    <strong th:text="${dashboard.username}">username</strong>
</p>

<hr>

<section>
    <h2>Account</h2>

    <a th:href="@{/logout}">
        <button type="button">Logout</button>
    </a>
</section>

<hr>

<section>
    <h2>Shopping</h2>

    <!-- Browse product list -->
    <a th:href="@{/products}">
        <button type="button">Browse Products</button>
    </a>

    <!-- View cart -->
    <a th:href="@{/cart}">
        <button type="button">My Cart</button>
    </a>
</section>

<hr>

<section>
    <h2>Seller Options</h2>

    <!-- Case 1: No seller record yet -->
    <div th:if="${!dashboard.sellerExists}">
        <p>You are currently not a seller.</p>

        <a th:href="@{/customer/seller/apply}">
            <button type="button">Apply to Become a Seller</button>
        </a>
    </div>

    <!-- Case 2: Seller exists and status = PENDING -->
    <div th:if="${dashboard.sellerExists and dashboard.sellerStatus == 'PENDING'}">
        <p>Your seller application is pending approval.</p>
    </div>

    <!-- Case 3: Seller exists and status = REJECTED -->
    <div th:if="${dashboard.sellerExists and dashboard.sellerStatus == 'REJECTED'}">
        <p>Your seller application was rejected.</p>

        <p th:if="${dashboard.reviewComment != null}"
           th:text="'Reason: ' + ${dashboard.reviewComment}">
            Reason here
        </p>

        <a th:href="@{/customer/seller/apply}">
            <button type="button">Reapply</button>
        </a>
    </div>

    <!-- Case 4: Seller exists and status = APPROVED -->
    <div th:if="${dashboard.sellerExists and dashboard.sellerStatus == 'APPROVED'}">
        <p>You are an approved seller.</p>

        <a th:href="@{/seller/dashboard}">
            <button type="button">Enter Seller Mode</button>
        </a>
    </div>
</section>

</body>
</html>
