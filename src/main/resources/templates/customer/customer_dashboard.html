<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Customer Dashboard</title>
</head>
<body>

<!-- Include navbar fragment if you use it -->
<!-- <div th:replace="fragments/navbar :: navbar"></div> -->

<h1>Customer Dashboard</h1>

<section>
    <p th:text="'Welcome, ' + ${user.username} + '!'">Welcome, User!</p>
</section>

<hr>

<section>
    <!-- No seller record yet -->
    <div th:if="${hasSellerRecord} == false">
        <h2>Seller Application</h2>
        <p>You are currently not a seller.</p>
        <form th:action="@{/customer/apply-seller}" method="post">
            <button type="submit">Become a Seller</button>
        </form>
    </div>

    <!-- Has seller record -->
    <div th:if="${hasSellerRecord}">
        <h2>Your Seller Status</h2>

        <!-- Pending -->
        <div th:if="${seller.status != null and seller.status.name() == 'PENDING'}">
            <p>Your seller status: <strong>Pending</strong></p>
            <p>Your application is under review by the admin.</p>
        </div>

        <!-- Approved -->
        <div th:if="${seller.status != null and seller.status.name() == 'APPROVED'}">
            <p>Your seller status: <strong>Approved</strong></p>
            <p>You can now manage your shop and products.</p>
            <a th:href="@{/seller/dashboard}">
                <button type="button">Go to Seller Dashboard</button>
            </a>
        </div>

        <!-- Rejected -->
        <div th:if="${seller.status != null and seller.status.name() == 'REJECTED'}">
            <p>Your seller status: <strong>Rejected</strong></p>
            <p th:text="'Reason: ' + ${seller.reviewComment}">Reason: Example comment</p>

            <!-- Optional: allow re-apply -->
            <form th:action="@{/customer/reapply-seller}" method="post">
                <button type="submit">Re-apply as Seller</button>
            </form>
        </div>

        <!-- Deactivated -->
        <div th:if="${seller.status != null and seller.status.name() == 'DEACTIVATED'}">
            <p>Your seller status: <strong>Deactivated</strong></p>
            <p>Your seller account has been deactivated. You are currently a normal customer.</p>

            <!-- You may allow apply again -->
            <form th:action="@{/customer/reapply-seller}" method="post">
                <button type="submit">Apply Again as Seller</button>
            </form>
        </div>
    </div>
</section>

</body>
</html>
